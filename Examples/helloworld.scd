(
var server = Server(\nrt,
	options: ServerOptions.new
	.numOutputBusChannels_(2)
	.numInputBusChannels_(2)
);

// Add CVBS SynthDefs
Object.defineCVBS;

x = Ppar([
	Pbind(
		\instrument, "linePAL",
		\color, 1,
		\dur, Pseq([2], 1),
	),
	Pbind(
		\instrument, "maskedPicture",
		\dur, Pseq([2], 1),
	),
	Pbind(
		\instrument, "vBar",
		\x, [0.0, 0.9],
		\brightness, [1, 0.8],
		\width, 0.1,
		\dur, Pseq([2], 1),
	),
	Pbind(
		\instrument, "hBar",
		\y, [0.0, 0.9],
		\brightness, [1, 0.5],
		\height, 0.1,
		\dur, Pseq([2], 1),
	),
// HELLO WORLD!
     Pbind(  
                \instrument, "hLine",
                \x, [100, 125, 125, 125, 150, 175, 207, 207, 250, 282, 282, 300, 325, 352, 352],
                \y, [190, 200, 190, 180, 200, 200, 200, 180, 200, 200, 180, 184, 200, 200, 180],  // max: 576, only even rows
                \length, [20, 20, 15, 20, 20, 20, 10, 10, 20, 10, 10, 18, 20, 10, 10],
                \dur, Pseq([2], 1)
        ),
     Pbind(  
                \instrument, "Box",
                \x, [0.1562916666666667, 0.182125, 0.18858333333333335, 0.220875, 0.25316666666666665, 0.28545833333333337, 0.3112916666666667, 0.3500416666666667, 0.3629583333333333, 0.375875, 0.38233333333333336, 0.4081666666666667, 0.414625, 0.4469166666666667, 0.4792083333333333, 0.5050416666666666, 0.5244166666666666, 0.5244166666666666],
                \y, [0.3177083333333333, 0.3177083333333333, 0.3177083333333333, 0.3177083333333333, 0.3177083333333333, 0.3211805555555556, 0.3211805555555556, 0.3177083333333333, 0.3350694444444444, 0.3177083333333333, 0.3211805555555556, 0.3211805555555556, 0.3177083333333333, 0.3177083333333333, 0.3211805555555556, 0.3263888888888889, 0.3177083333333333, 0.3489583333333333],
                \brightness, 1,
                \width, [0.002777777777777778, 0.002777777777777778, 0.002777777777777778, 0.002777777777777778, 0.002777777777777778, 0.002777777777777778, 0.002777777777777778, 0.002777777777777778, 0.002777777777777778, 0.002777777777777778, 0.002777777777777778, 0.002777777777777778, 0.002777777777777778, 0.002777777777777778, 0.002777777777777778, 0.002777777777777778, 0.002777777777777778, 0.002777777777777778],
                \height, [0.034722222222222224, 0.034722222222222224, 0.034722222222222224, 0.034722222222222224, 0.034722222222222224, 0.026041666666666668, 0.026041666666666668, 0.034722222222222224, 0.017361111111111112, 0.034722222222222224, 0.026041666666666668, 0.026041666666666668, 0.034722222222222224, 0.034722222222222224, 0.026041666666666668, 0.017361111111111112, 0.026041666666666668, 0.003472222222222222],
                \dur, Pseq([2], 1)
        )

]).asScore(625 * 0.064 * 40, timeOffset: 0.001);

Object.namesCVBS.do { |name|
   x.add([0.0, [\d_recv, SynthDescLib.global.at(name).def.asBytes]]);
};

x.sort;

x.recordNRT(
	outputFilePath: "output.flac",
	sampleRate: 28636,
	headerFormat: "FLAC",
	sampleFormat: "int8",
	options: ServerOptions.new.numOutputBusChannels_(1),
	duration: x.endTime
);

server.remove;
"Script finished, quitting...".postln;
0.exit;
)
